(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Keet=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports=Keet;function Keet(tagName,debug,context){var cargv=[].slice.call(arguments),ctx=this,child,childAttr,regc,injc,kStr,kRegc,kAttr,ret,l,tg,log=cargv.filter(function(c){if(typeof c==="boolean"&&c)return c;else if(typeof c==="string"&&c==="debug")return c})[0],context=cargv.filter(function(c){return typeof c==="object"})[0],getId=function(id,uid){if(ctx.ctor.doc){ret=document.getElementById(id);if(!ret&&uid)ret=document.querySelector(ctx.cat('[k-link="',uid,'"]'))}else{throw"Not a document object model."}return ret},testEval=function(ev){try{return eval(ev)}catch(e){return false}},camelCase=function(s){var rx=/\-([a-z])/g;if(s===s.toUpperCase())s=s.toLowerCase();return s.replace(rx,function(a,b){return b.toUpperCase()})},eleConstruct=function(){var args=[].slice.call(arguments),arr=ctx.tag.apply(null,args);log("tag result => \n"+JSON.stringify(arr,null,2));return arr.join("")},guid=function(){return Math.round(Math.random()*16777216).toString(32)};if(log&&typeof window==="object"&&!window.log){window.log=console.log.bind(console);log=console.log.bind(console)}else if(log&&typeof window==="object"&&window.log){log=console.log.bind(console)}else{log=function(){}}this.obs={};this.ctor={};Object.defineProperty(this,"obs",{enumerable:false,configurable:false,writable:false});Object.defineProperty(this,"ctor",{enumerable:false,configurable:false,writable:false});this.ctor.doc=function(){return typeof document=="object"?true:false}();this.cat=function(){return[].slice.call(arguments).join("")};this.copy=function(argv){return Array.isArray(argv)?argv.map(function(v){return v}):argv};this.tag=function(){var args=[].slice.call(arguments),arr=ctx.ktag.apply(null,args);return arr.join("")};this.loaded=function(cb){if(ctx.ctor.doc&&!ctx.ctor.loaded){document.addEventListener("DOMContentLoaded",function(ev){l=["content loaded ->","el:",ctx.el];if(!ctx.el)l.splice(1,2,"k-link:",ctx.ctor.uid);log.apply(null,l);ctx.ctor.loaded=true;if(typeof cb==="function")cb();else throw"Not a function."})}else{cb()}};this.isNode=function(){var node=getId(ctx.el,ctx.ctor.uid);if(node&&typeof node=="object"&&node.nodeType===1){ctx.ctor.loaded=true;node=null;return true}else{return false}};this.refNode=function(){return getId(ctx.el,ctx.ctor.uid)};this.ctor.tags={};this.ctor.ops={};this.ctor.uid=guid();tg=cargv.filter(function(c){return typeof c==="string"&&c!=="debug"})[0];if(tg)this.ctor.tmpl=["<",tg,' k-link="',this.ctor.uid,'"',">","</",tg,">"];var insOf=function(i){return i instanceof Object?true:false};var _processTags=function(str,kData){var childs=str.match(/{{([^{}]+)}}/g,"$1"),idx,ctmpl;if(childs){childs.forEach(function(c){regc=c.replace(/{{([^{}]+)}}/g,"$1");if(context){child=context[regc]?context[regc]:false;log("evaluating context child:",context,"->",insOf(child))}else{child=testEval(regc)?eval(regc):false;log("evaluating child:",regc,"->",insOf(child))}if(child){childAttr={el:child.el,state:child.obs._state_,preserveAttr:child.ctor.preserveAttr,uid:child.ctor.uid,operator:child.vDomLoaded};ctx.ctor.tags[regc]=childAttr;if(child.ctor.tmpl){ctmpl=ctx.copy(child.ctor.tmpl);idx=ctmpl.indexOf(">");if(~idx){ctmpl.splice(idx+1,0,child.obs._state_.value);injc=ctx.cat.apply(null,ctmpl)}}else injc=child.obs._state_?child.obs._state_.value:"";str=str.replace("{{"+regc+"}}",injc);if(child.obs._state_&&child.obs._state_["k-data"]){str=kDataProcesseor(str,child.obs._state_["k-data"])}}})}if(kData)str=kDataProcesseor(str,kData);if(ctx.ctor.d!==str){ctx.ctor.d=str;return str}else{return false}};var kDataProcesseor=function(str,kData){kStr=str.match(/{{([^{}]+)}}/g,"$1");if(kStr){kStr.forEach(function(c){kRegc=c.replace(/{{([^{}]+)}}/g,"$1");for(kAttr in kData){if(kAttr===kRegc)str=str.replace("{{"+kRegc+"}}",kData[kRegc])}})}return str};var insertAfter=function(newNode,referenceNode,parentNode){if(referenceNode)referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling);else parentNode.insertBefore(newNode,parentNode.firstChild)};var clone=function(v){var o={};o.copy=v;return o.copy};var loopChilds=function(arr,elem){for(var child=elem.firstChild;child!==null;child=child.nextSibling){arr.push(child);if(child.hasChildNodes()){loopChilds(arr,child)}}};var applyAttrib=function(selector,state,preserveAttr,uid){var cty,attr,ts,type,a,d,gid,prev;for(attr in state){ts=new RegExp("-");if(attr.match(ts)){type=attr.split("-");if(type[0]==="attr"&&!ctx.ctor.attr)ctx.ctor.attr={};if(type[0]==="css"&&!ctx.ctor.css)ctx.ctor.css={};if(type[0]==="attr"&&ctx.ctor.attr[type[1]]!==state[attr]){ctx.ctor.attr[type[1]]={selector:selector,attr:state[attr]};gid=getId(selector,uid);if(gid)gid.setAttribute(type[1],state[attr])}else if(type[0]==="css"){cty=camelCase(attr.substring(4));if(ctx.ctor.css[cty]!==state[attr]){ctx.ctor.css[cty]={selector:selector,css:state[attr]};gid=getId(selector,uid);if(gid)gid.style[cty]=state[attr]}}else if(type[0]==="attr"&&preserveAttr){gid=getId(selector,uid);if(gid)gid.setAttribute(type[1],state[attr])}}}if(preserveAttr){a=ctx.ctor.attr;for(attr in a){if(typeof a[attr]!=="function"){prev=getId(a[attr].selector,uid);if(prev){prev.setAttribute(attr,a[attr].attr)}}}d=ctx.ctor.css;for(attr in d){if(typeof d[attr]!=="function"){prev=getId(d[attr].selector,uid);if(prev)prev.style[attr]=d[attr].css}}}if(state&&state.value){var kNode=getId(selector,uid);var listKnodeChild=[];if(kNode&&kNode.hasChildNodes()){loopChilds(listKnodeChild,kNode);listKnodeChild.forEach(function(c,i){if(c.nodeType===1&&c.hasAttributes()){var kString=c.getAttribute("k-click");if(kString){var m=kString.match(/\(([^()]+)\)/g);var kFn=kString.split("(");var kClick;if(m){if(kFn){if(context)kClick=testEval(context[kFn[0]])?eval(context[kFn[0]]):false;else kClick=testEval(kFn[0])?eval(kFn[0]):false;if(typeof kClick==="function")processClickEvt(c,kClick,kFn)}}else{if(context)kClick=testEval(context[kString])?eval(context[kString]):false;else kClick=testEval(kString)?eval(kString):false;if(typeof kClick==="function")processClickEvt(c,kClick)}}}})}listKnodeChild=[]}};var processClickEvt=function(c,kClick,kFn){c.removeAttribute("k-click");c.addEventListener("click",function(evt){var argv=[];argv.push(evt);if(kFn){var v=kFn[1].slice(0,-1).split(",");if(v)v.forEach(function(v){argv.push(v)})}return kClick.apply(null,argv)})};var nodeUpdate=function(newNode,oldNode){var oAttr=newNode.attributes;var output={};for(var i=oAttr.length-1;i>=0;i--){output[oAttr[i].name]=oAttr[i].value}for(var iAttr in output){if(oldNode.attributes[iAttr]&&oldNode.attributes[iAttr].name===iAttr&&oldNode.attributes[iAttr].value!=output[iAttr]){oldNode.setAttribute(iAttr,output[iAttr])}}output={}};var nodeUpdateHTML=function(newNode,oldNode){if(newNode.nodeValue!==oldNode.nodeValue)oldNode.nodeValue=newNode.nodeValue};var updateElem=function(oldElem,newElem,fallbackHTMLstring){var oldArr=[],newArr=[],flag=false;oldArr.push(oldElem);newArr.push(newElem);loopChilds(oldArr,oldElem);loopChilds(newArr,newElem);if(oldArr.length!==newArr.length){oldElem.innerHTML=fallbackHTMLstring;return false}oldArr.forEach(function(ele,idx,arr){if(ele.nodeType===1&&ele.hasAttributes()){nodeUpdate(newArr[idx],ele)}else if(ele.nodeType===3){nodeUpdateHTML(newArr[idx],ele);if(ele.nodeValue!==oldArr[idx].nodeValue)flag=true}if(idx===arr.length-1){oldArr.splice(0);newArr.splice(0);return flag}})};var genChildwithId=function(str){var tempDiv,arr=[];tempDiv=document.createElement("div");tempDiv.innerHTML=str;var loopChilds=function(elem){for(var child=elem.firstChild;child!==null;child=child.nextSibling){if(child.nodeType===1){child.setAttribute("k-link",ctx.cat(ctx.ctor.uid,"-",guid()))}if(child.hasChildNodes()){loopChilds(child)}}};loopChilds(tempDiv);return tempDiv.childNodes[0]};var _triggerElem=function(){var state=ctx.obs._state_,el=ctx.el,uid=ctx.ctor.uid,processStr,ele=getId(el,uid),childTags=ctx.ctor.tags,attr,tempDiv,childLen,tempDivChildLen,i,j,len,c;if(ele){processStr=_processTags(state.value,state["k-data"]);if(ctx.ctor.ops.preserve===true&&ele.hasChildNodes()){if(ctx.ctor.ops.type==="remove"){ele.removeChild(ele.childNodes[ctx.ctor.ops.index])}else if(ctx.ctor.ops.type==="update"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;var flag=updateElem(ele.childNodes[ctx.ctor.ops.index],tempDiv.childNodes[0])}else if(ctx.ctor.ops.type==="unshift"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;for(i=tempDiv.childNodes.length-1;i>-1;i--){ele.insertBefore(tempDiv.childNodes[i],ele.firstChild)}}else if(ctx.ctor.ops.type==="slice"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;ele.innerHTML="";tempDivChildLen=clone(tempDiv.childNodes.length);for(i=0;i<tempDivChildLen;i++){ele.appendChild(tempDiv.childNodes[0])}}else if(ctx.ctor.ops.type==="splice"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;childLen=clone(ele.childNodes.length);tempDivChildLen=clone(tempDiv.childNodes.length);if(ctx.ctor.ops.count&&ctx.ctor.ops.count>0){for(i=ctx.ctor.ops.index;i<childLen+1;i++){len=ctx.ctor.ops.index+ctx.ctor.ops.count;if(i<len){ele.removeChild(ele.childNodes[ctx.ctor.ops.index]);if(i===len-1&&tempDivChildLen>0){c=ctx.ctor.ops.index-1;for(j=ctx.ctor.ops.index;j<tempDivChildLen+ctx.ctor.ops.index;j++){insertAfter(tempDiv.childNodes[0],ele.childNodes[c],ele);c++}}}}}}else{tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;ele.appendChild(tempDiv.childNodes[0])}tempDiv=null}else if(processStr&&state.value.length){if(ele.hasChildNodes()&&ele.childNodes[0].nodeType===1){tempDiv=document.createElement("div");tempDiv.innerHTML=processStr;updateElem(ele,tempDiv,processStr);tempDiv=null}else{ele.innerHTML=processStr}}else if(!processStr&&state.value.length<1){ele.innerHTML=""}else if(!processStr&&state.value.length>1){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.d;updateElem(ele,tempDiv,ctx.ctor.d)}applyAttrib(el,state,uid);for(attr in childTags)applyAttrib(childTags[attr].el,childTags[attr].state,childTags[attr].preserveAttr,childTags[attr].uid);ele=null}};var _registerElem=function(){var regList=ctx.ctor.register,evReg;var reg=regList.filter(function(f){return typeof f==="string"})[0];var force=regList.filter(function(f){return typeof f==="boolean"})[0];var fn=regList.filter(function(f){return typeof f==="function"})[0];if(context){evReg=context[reg]?context[reg]:false;log("evaluating context register:",reg,"->",insOf(evReg))}else{evReg=testEval(reg)?eval(reg):false;log("evaluating register:",reg,"->",insOf(evReg))}if(evReg&&typeof evReg.__proto__.compose==="function"){evReg.compose(force,fn)}};Object.defineProperty(this.obs,"_state_",{__proto__:null,writeable:true,get:function(){return this._},set:function(value){this._=value;if(ctx.el||ctx.ctor.uid)_triggerElem();if(ctx.ctor.register)_registerElem()}});if(!Object.prototype.watch){Object.defineProperty(Object.prototype,"watch",{enumerable:false,configurable:true,writable:false,value:function(prop,handler){var oldval=this[prop],newval=oldval,getter=function(){return newval},setter=function(val){oldval=newval;return newval=handler.call(this,prop,oldval,val)};if(delete this[prop]){Object.defineProperty(this,prop,{get:getter,set:setter,enumerable:true,configurable:true})}}})}if(!Object.prototype.unwatch){Object.defineProperty(Object.prototype,"unwatch",{enumerable:false,configurable:true,writable:false,value:function(prop){var val=this[prop];delete this[prop];this[prop]=val}})}}Keet.prototype.register=function(instance,force,fn){var argv=[].slice.call(arguments);if(typeof instance==="string")this.ctor.register=argv;else throw"Argument is not a string.";return this};Keet.prototype.unreg=function(){this.ctor.register=null;return this};Keet.prototype.template=function(tag,id){var vtag=["<",tag,">","</",tag,">"];if(id){vtag.splice(2,0,' id="',id,'"');this.link(id)}this.ctor.tmpl=vtag;return this};Keet.prototype.compose=function(force,fn){var argv=[].slice.call(arguments),c=this.obs._state_,ctx=this,elem;force=argv.filter(function(f){return typeof f==="boolean"})[0];fn=argv.filter(function(f){return typeof f==="function"})[0];function childFn(){for(var attr in ctx.ctor.tags){if(typeof ctx.ctor.tags[attr].operator==="function")ctx.ctor.tags[attr].operator()}}if(force){elem=this.isNode();if(elem){this.obs._state_=c;if(fn)fn(this.refNode());childFn()}else{if(fn)fn(false);childFn()}}else{this.loaded(function(){ctx.obs._state_=c;if(fn)fn(ctx.refNode());childFn()})}return this};Keet.prototype.preserveAttributes=function(argv){this.ctor.preserveAttr=argv?false:true;return this};Keet.prototype.link=function(tag,id,value){var argv=[].slice.call(arguments),kLink,vtag;if(argv.length===1)this.el=argv[0];else if(argv.length===2&&!this.ctor.tmpl){this.el=argv[0];this.set(argv[1])}else if(argv.length===2&&this.ctor.tmpl){kLink=this.ctor.tmpl.indexOf(' k-link="');if(~kLink){this.ctor.tmpl.splice(kLink,2,' id="',argv[0])}this.el=argv[0];this.set(argv[1])}else if(argv.length>2&&typeof tag==="string"&&(typeof value==="string"||typeof value==="number")){this.el=id;vtag=this.cat("<",tag,">",value,"</",tag,">");this.set(vtag)}return this};Keet.prototype.watch=function(instance,fn){var ctx=this,argv,event;instance=instance||this.ctor.arrayProto;if(!Array.isArray(instance)){argv=[].slice.call(arguments);this.watchObj.apply(this,argv);return this}var opsList=function(){return["push","pop","shift","unshift","slice","splice"]};var op=opsList(),ev={};ev._="noArrayProto";ev.change=function(cb){if(cb)cb(this)};Object.defineProperty(ev,"state",{__proto__:null,writeable:true,get:function(){return this._},set:function(value){this._=value;this.change()}});var query=function(ops,argvs){op=[];if(ops==="push"){ctx.insert(argvs[0]);op=opsList();ev.state="push"}else if(ops==="pop"){var i=instance.length;ctx.remove(i);op=opsList();ev.state="pop"}else if(ops==="shift"){ctx.remove(0);op=opsList();ev.state="shift"}else if(ops==="unshift"){ctx.unshift.apply(ctx,argvs);op=opsList();ev.state="unshift"}else if(ops==="slice"){ctx.slice.apply(ctx,argvs);op=opsList();ev.state="slice"}else if(ops==="splice"){ctx.splice.apply(ctx,argvs);op=opsList();ev.state="splice"}};op.forEach(function(f){instance[f]=function(){if(op.length>0){Array.prototype[f].apply(this,arguments);query(f,arguments)}}});event=new Promise(function(resolve){this.change(function(res){resolve(res)})}.bind(ev));instance.forEach(function(r,i){instance.watch(i,function(idx,o,n){instance.unwatch(i);event.then(function(ev){if(ev._==="noArrayProto")ctx.update(idx,n);if(typeof fn==="function"){fn(ctx.refNode())}ctx.watch(instance,fn)})})});return this};Keet.prototype.watchObj=function(instance,fn){var ctx=this,attr;if(Array.isArray(instance)){throw"Wrong type of operation, use Keet.prototype.watch instead."}for(attr in instance){instance.watch(attr,function(idx,o,n){instance.unwatch(attr);if(typeof fn==="function"){instance[attr]=n;fn(idx,o,n);ctx.watchObj(instance,fn)}else{throw"Not a function."}})}return this};Keet.prototype.unWatch=function(instance){var attr;if(Array.isArray(instance)){instance.forEach(function(r,i){instance.unwatch(i)})}else{for(attr in instance){instance.unwatch(attr)}}return this};Keet.prototype.array=function(array,templateString,isAppend){var tmplStr="",arrProps,tmpl,rep;this.ctor.arrayProto=array;this.ctor.arrayPristine=this.copy(array);this.ctor.tmplString=templateString;arrProps=templateString.match(/{{([^{}]+)}}/g,"$1");array.forEach(function(r){tmpl=templateString;arrProps.forEach(function(s){rep=s.replace(/{{([^{}]+)}}/g,"$1");tmpl=tmpl.replace(/{{([^{}]+)}}/,r[rep])});tmplStr+=tmpl});if(isAppend){this.ctor.ops.node=tmplStr}else{this.set(tmplStr)}return this};Keet.prototype.update=function(index,obj,fn){var arr=this.ctor.arrayProto,str=this.ctor.tmplString,fnArr;if(Array.isArray(arr)){if(typeof index==="number")arr[index]=obj;this.ctor.ops={preserve:true,type:"update",index:index,node:""};if(typeof fn==="function"){fnArr=fn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array([obj],str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.remove=function(idx,fn){var arr=this.ctor.arrayProto,arrPris=this.copy(this.ctor.arrayPristine),str=this.ctor.tmplString,index,key,fnArr;if(Array.isArray(arr)){this.ctor.ops={preserve:true,type:"remove"};if(typeof idx==="object"){key=Object.keys(idx)[0];index=arrPris.map(function(f){return f[key]}).indexOf(idx[key]);if(~index){arrPris.splice(index,1);this.ctor.ops.index=index}}else{index=arrPris[idx];if(index){arrPris.splice(idx,1);this.ctor.ops.index=idx}}arr=this.copy(arrPris);if(typeof fn==="function"){fnArr=fn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.insert=function(obj,fn){var arr=this.ctor.arrayProto,str=this.ctor.tmplString,fnArr;if(Array.isArray(arr)){arr.push(obj);this.ctor.ops={preserve:true,type:"append",index:null,node:""};if(typeof fn==="function"){fnArr=fn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array([obj],str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.unshift=function(fn,obj){var arr=this.copy(this.ctor.arrayPristine),str=this.ctor.tmplString,ctxFn,argv,fnArr;if(typeof arguments[0]==="function"){ctxFn=[].shift.call(arguments)}if(Array.isArray(arr)){argv=[].slice.call(arguments);arr.unshift(argv);arr=[].concat.apply([],arr);this.ctor.ops={preserve:true,type:"unshift",index:null,node:""};if(ctxFn&&typeof ctxFn==="function"){fnArr=ctxFn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array(argv,str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.slice=function(fn,start,end){var arr=this.copy(this.ctor.arrayPristine),str=this.ctor.tmplString,ctxFn,argv,fnArr;if(typeof arguments[0]==="function"){ctxFn=[].shift.call(arguments)}if(Array.isArray(arr)){argv=[].slice.call(arguments);if(argv.length==2)arr=arr.slice(argv[0],argv[1]);else arr=arr.slice(argv[0]);this.ctor.ops={preserve:true,type:"slice",index:null,node:""};if(ctxFn&&typeof ctxFn==="function"){fnArr=ctxFn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array(arr,str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.splice=function(fn,start,count,obj){var arr=this.copy(this.ctor.arrayPristine),str=this.ctor.tmplString,ctxFn,objs,argv,fnArr;argv=[].slice.call(arguments);if(typeof arguments[0]==="function"){ctxFn=[].shift.call(argv)}start=[].shift.call(argv);if(typeof argv[0]==="number"){count=[].shift.call(argv)}if(Array.isArray(arr)){if(argv.length>0&&count){arr.splice(start,count,argv);arr=[].concat.apply([],arr)}else if(!count){arr.splice(start)}this.ctor.ops={preserve:true,type:"splice",index:start,count:count,node:argv};if(ctxFn&&typeof ctxFn==="function"){fnArr=ctxFn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{if(argv.length>0)this.array(argv,str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.bindListener=function(inputId,listener,type){var ctx=this;this.loaded(function(){var e=document.getElementById(inputId);type=type||"input";if(!ctx.ctor.ev)ctx.ctor.ev={};if(e){var str=ctx.cat(inputId,"-",type);ctx.ctor.ev[str]=function(evt){if(typeof listener.__proto__.set==="function"){evt.preventDefault();listener.set(e.value)}else if(typeof listener==="function"){listener(e.value,evt)}else{return e.value}};e.addEventListener(type,ctx.ctor.ev[str])}else throw"Element does not exist"});return this};Keet.prototype.removeListener=function(inputId,type){var ctx=this;this.loaded(function(){var e=document.getElementById(inputId);type=type||"input";if(e){var str=ctx.cat(inputId,"-",type);e.removeEventListener(type,ctx.ctor.ev[str],false);delete ctx.ctor.ev[str]}else throw"Element does not exist"});return this};Keet.prototype.set=function(value,vProp){var obj,assign;if(vProp){obj={};obj[value]=vProp;if(!this.obs._state_){this.obs._state_=obj}else{assign=Object.assign(this.obs._state_,obj);this.obs._state_=assign}}else{if(!this.obs._state_&&typeof value!=="object"){obj={};obj.value=value;this.obs._state_=obj}else if(!this.obs._state_&&typeof value==="object"){this.obs._state_=value}else if(typeof value==="object"){assign=Object.assign(this.obs._state_,value);this.obs._state_=assign}else{this.obs._state_={value:value}}}return this};Keet.prototype.ktag=function(tag,value,attributes,styles){var attr,idx,te,a=[].slice.call(arguments),ret=["<",a[0],">",a[1],"</",a[0],">"];if(a.length>2&&typeof a[2]==="object"){for(attr in a[2]){ret.splice(2,0," ",attr,'="',a[2][attr],'"')}}if(a.length>3&&typeof a[3]==="object"){idx=ret.indexOf(">");if(~idx){te=[idx,0,' style="'];for(attr in a[3]){te.push(attr);te.push(":");te.push(a[3][attr])}te.push('"');ret.splice.apply(ret,te)}}return ret}},{}]},{},[1])(1)});
