!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Keet=e()}}(function(){return function s(r,a,l){function c(t,e){if(!a[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(p)return p(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[t]={exports:{}};r[t][0].call(o.exports,function(e){return c(r[t][1][e]||e)},o,o.exports,s,r,a,l)}return a[t].exports}for(var p="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){t.exports=function(e){return Array.isArray(e)?e.map(function(e){return e}):function(e){var t={};if("object"!=typeof e)return t.copy=e,t.copy;for(var n in e)t[n]=e[n];return t}(e)}},{}],2:[function(e,t,n){var i=function(e,t){if(!t)return!1;for(var n=t.firstChild;null!==n;n=n.nextSibling)e.push(n),n.hasChildNodes()&&i(e,n)};n.loopChilds=i;n.updateElem=function(e,t){var s=[],r=[];s.push(e),r.push(t),i(s,e),i(r,t),s.map(function(e,t,n){var i,o;e&&1===e.nodeType&&e.hasAttributes()?function(e,t){if(e){for(var n=e.attributes,i={},o=n.length-1;0<=o;o--)i[n[o].name]=n[o].value;for(var s in i)t.attributes[s]&&t.attributes[s].name===s&&t.attributes[s].value!==i[s]&&t.setAttribute(s,i[s]);""===t.textContent&&e.textContent&&(t.textContent=e.textContent),"checkbox"===t.type&&!t.checked&&e.checked&&(t.checked=!0),"checkbox"===t.type&&t.checked&&!e.checked&&(t.checked=!1),i={}}}(r[t],e):e&&3===e.nodeType&&(i=r[t],o=e,i&&i.nodeValue!==o.nodeValue&&(o.nodeValue=i.nodeValue)),t===n.length-1&&(s.splice(0),r.splice(0))})}},{}],3:[function(e,t,n){var l=e("./copy"),c=e("./tag"),p=e("./tmplHandler"),u=e("./tmplStylesHandler"),f=e("./tmplClassHandler"),d=e("./tmplAttrHandler"),h=e("./processEvent"),r=e("./elementUtils").updateElem,a=e("./utils").selector,s=function(e,t){var n=this;if(e<this.__stateList__.length){var i=this.__stateList__[e],o=this[i];Object.defineProperty(this,i,{enumerable:!1,configurable:!0,get:function(){return o},set:function(e){o=e,function(){var s=this;Object.keys(this.base).map(function(e){var t,n=s.base[e]["keet-id"],i=a(n);i||"string"!=typeof s.base[e]||(i=document.getElementById(s.el));var o=[].slice.call(arguments);t=v.apply(s,[s.base[e]].concat(o)),r(i,t)})}.apply(n,t)}}),e++,s.apply(this,[e,t])}},m=function(e){s.apply(this,[0,e])},y=function(e){this.__stateList__=this.__stateList__.concat(e)},v=function(){var e=[].shift.call(arguments),t=[].slice.call(arguments),n=document.createElement("div"),i=l(e);delete i.template,delete i.tag,delete i.style,delete i.class,this.__stateList__=[];var o=e.template?p.call(this,e.template,y.bind(this)):"string"==typeof e?p.call(this,e,y.bind(this)):null,s=u.call(this,e.style,y.bind(this)),r=f.call(this,e,y.bind(this));r&&(i.class=r),t&&t.length&&d.apply(this,[i].concat(t));var a=e.tag?c(e.tag,o||"",i,s):o;return n.innerHTML=a,"input"===e.tag&&(i.checked?n.childNodes[0].checked=!0:n.childNodes[0].removeAttribute("checked")),m.call(this,t),h.call(this,n),"string"==typeof e?n:e.tag?n.childNodes[0]:n};n.genElement=v,n.setState=m,n.updateStateList=y},{"./copy":1,"./elementUtils":2,"./processEvent":6,"./tag":7,"./tmplAttrHandler":8,"./tmplClassHandler":9,"./tmplHandler":10,"./tmplStylesHandler":11,"./utils":12}],4:[function(e,t,n){var o=e("./processEvent"),a="";t.exports=function(e){var t,n=this.args,i=this.base.template.match(/{{([^{}]+)}}/g);return a=this.base.template,function e(t,n,i,o){if(t<i.length){var s=i[t].replace(/{{([^{}]+)}}/g,"$1");if(a=a.replace(/{{([^{}]+)}}/,n[s]),o&&~o.indexOf(s)&&!n[s]){var r=new RegExp(" "+s+'="'+n[s]+'"',"g");a=a.replace(r,"")}e(++t,n,i,o)}}(0,e,i,n),(t=document.createElement("div")).innerHTML=a,/ k-/.test(a)&&o.call(this,t),t.childNodes[0].setAttribute("keet-id",e["keet-id"]),t.childNodes[0]}},{"./processEvent":6}],5:[function(e,t,n){var c=e("./genElement").genElement,p=e("./genElement").setState,u=e("./tmplHandler"),f=e("./processEvent"),d=e("./utils").genId,i=e("./genTemplate");t.exports=function(){if("object"!=typeof this.base)throw new Error("instance is not an object");var r=this,a=[],l=[].slice.call(arguments);return Array.isArray(this.base.model)?(this.base.template=this.base.template.trim().replace(/\s+/g," "),this.base.model=this.base.model.map(function(e){return e["keet-id"]=d(),e}),this.base.model.map(function(e){a.push(i.call(r,e))})):Object.keys(this.base).map(function(e){var t=r.base[e];if(t&&"object"==typeof t){var n=d();t["keet-id"]=n,r.base[e]["keet-id"]=n;var i=c.apply(r,[t].concat(l));a.push(i)}else{r.__stateList__=[];var o=u.call(r,t,function(e){r.__stateList__=r.__stateList__.concat(e)}),s=document.createElement("div");s.innerHTML=o,p.call(r,l),f.call(r,s),s.childNodes.forEach(function(e){a.push(e)})}}),a}},{"./genElement":3,"./genTemplate":4,"./processEvent":6,"./tmplHandler":10,"./utils":12}],6:[function(e,t,n){var o=e("./elementUtils").loopChilds,c=function(e,t,n){var i,o,s,r,a,l=t.attributes;e<l.length?(/^k-/.test(l[e].nodeName)&&(i=l[e].nodeName.split("-")[1],"function"==typeof(s=this[(o=l[e].nodeValue.split("("))[0]])&&(n.push(l[e].nodeName),r=[],(a=o[1].slice(0,-1).split(",").filter(function(e){return""!==e})).length&&a.map(function(e){r.push(e)}),t.addEventListener(i,s.bind.apply(s.bind(this),[t].concat(r)),!1))),e++,c.apply(this,[e,t,n])):n.map(function(e){t.removeAttribute(e)})};t.exports=function(e){var t=this,n=[],i=[];o(n,e),n.map(function(e){1===e.nodeType&&e.hasAttributes()&&c.apply(t,[0,e,i])}),n=[]}},{"./elementUtils":2}],7:[function(e,t,n){t.exports=function(){return function(){var e,t,n=[].slice.call(arguments),i=["<",n[0],">",n[1],"</",n[0],">"];if(2<n.length&&"object"==typeof n[2])for(e in n[2])"boolean"==typeof n[2][e]&&n[2][e]?i.splice(2,0," ",e):"class"===e&&Array.isArray(n[2][e])?i.splice(2,0," ",e,'="',n[2][e].join(" ").trim(),'"'):i.splice(2,0," ",e,'="',n[2][e],'"');if(3<n.length&&"object"==typeof n[3]){for(e in t=[i.indexOf(">"),0,' style="'],n[3])t.push(e),t.push(":"),t.push(n[3][e]),t.push(";");t.push('"'),i.splice.apply(i,t)}return i}.apply(null,arguments).join("")}},{}],8:[function(e,t,n){var r=e("./genElement");t.exports=function(){var o=this,s=[].shift.call(arguments);Object.keys(s).map(function(n){var e=s[n].match(/{{([^{}]+)}}/g);if(e&&e.length){var i="";e.map(function(e){var t=e.replace(/{{([^{}]+)}}/g,"$1");void 0!==o[t]&&(r.updateStateList.call(o,t),!1===o[t]?delete s[n]:(i+=o[t],s[n]=i))})}})}},{"./genElement":3}],9:[function(e,t,n){t.exports=function(e,n){var i=this;if(e.class){var t=e.class.match(/{{([^{}]+)}}/g),o="";return t&&t.length&&t.map(function(e){var t=e.replace(/{{([^{}]+)}}/g,"$1");void 0!==i[t]&&(n(t),i[t].cstore.map(function(e){o+=e+" "}))}),o.length?o.trim():e.class}return!1}},{}],10:[function(e,t,n){t.exports=function(n,i){var o=this,e=n.match(/{{([^{}]+)}}/g);return e&&e.length&&e.map(function(e){var t=e.replace(/{{([^{}]+)}}/g,"$1");void 0!==o[t]&&(i(t),n=n.replace(/{{([^{}]+)}}/,o[t]))}),n}},{}],11:[function(e,t,n){var r=e("./copy");t.exports=function(e,i){var o=this,s=r(e);return e&&Object.keys(s).map(function(n){var e=s[n].match(/{{([^{}]+)}}/g);e&&e.length&&e.map(function(e){var t=e.replace(/{{([^{}]+)}}/g,"$1");void 0!==o[t]&&(i(t),s[n]=s[n].replace(/{{([^{}]+)}}/,o[t]))})}),s}},{"./copy":1}],12:[function(e,t,n){n.getId=function(e){return document.getElementById(e)},n.genId=function(){return Math.round(1*Math.random()*1e12).toString(32)},n.selector=function(e){return document.querySelector('[keet-id="'+e+'"]')}},{}],13:[function(e,t,n){"use strict";var i=e("./components/utils").getId,o=e("./components/utils").genId,l=e("./components/utils").selector,s=e("./components/parseStr"),c=e("./components/genTemplate"),p=e("./components/elementUtils").updateElem,r=function(e,t,n){var i,o=this;if(e<n.length)t.childNodes[e]||t.appendChild(n[e]),e++,r.apply(this,[e,t,n]);else{this.baseProxy=(i=this.base,new Proxy(i,{set:function(e,t,n){return e[t]=n,o.base[t]=e[t],!0},deleteProperty:function(e,t){var n=e[t]["keet-id"],i=l(n);return i&&i.remove(),delete o.base[t],!0}})),this.componentDidMount&&"function"==typeof this.componentDidMount&&this.componentDidMount()}};function a(){this.base={},Object.defineProperty(this,"__stateList__",{enumerable:!1,writable:!0})}a.prototype.mount=function(t){return"object"==typeof t&&Object.keys(t).map(function(e){"string"==typeof t[e]?t[e]=t[e].trim().replace(/\s+/g," "):"object"==typeof t[e]&&"string"==typeof t[e].template&&(t[e].template=t[e].template.trim().replace(/\s+/g," "))}),this.base=t,this},a.prototype.flush=function(e){var t=i(this.el);return t&&(t.innerHTML=""),this},a.prototype.link=function(e){return this.el=e,this.componentWillMount&&"function"==typeof this.componentWillMount&&this.componentWillMount(),this.render(),this},a.prototype.render=function(){var e=i(this.el),t=s.apply(this,this.args);return e&&r.apply(this,[0,e,t]),this},a.prototype.cluster=function(){var e=[].slice.call(arguments);0<e.length&&e.map(function(e){"function"==typeof e&&e()})},a.prototype.add=function(e){var t=i(this.el);Array.isArray(this.base.model)&&(e["keet-id"]=o(),this.base.model=this.base.model.concat(e),t.appendChild(c.call(this,e)))},a.prototype.destroy=function(i,o){Array.isArray(this.base.model)&&(this.base.model=this.base.model.filter(function(e,t){if(i!==e[o])return e;var n=l(e["keet-id"]);n&&n.remove()}))},a.prototype.update=function(o,s,r){var a=this;Array.isArray(this.base.model)&&(this.base.model=this.base.model.map(function(e,t,n){if(o===e[s]){r&&"object"==typeof r&&Object.assign(e,r);var i=l(e["keet-id"]);i&&p(i,c.call(a,e))}return e}))},t.exports=a},{"./components/elementUtils":2,"./components/genTemplate":4,"./components/parseStr":5,"./components/utils":12}]},{},[13])(13)});
/**
 * Keetjs v3.4.4 Alpha release: https://github.com/keetjs/keet.js
 * Minimalist view layer for the web
 *
 * <<<<<<<<<<<<<<<<<<<<<<<<<<<<<< Keetjs >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
 *
 * Copyright 2018, Shahrul Nizam Selamat
 * Released under the MIT License.
 */
