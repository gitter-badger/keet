!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Keet=e()}}(function(){return function e(t,n,i){function o(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[r]={exports:{}};t[r][0].call(p.exports,function(e){var n=t[r][1][e];return o(n||e)},p,p.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){t.exports=function(e){return Array.isArray(e)?e.map(function(e){return e}):function(e){var t={};if("object"!=typeof e)return t.copy=e,t.copy;for(var n in e)t[n]=e[n];return t}(e)}},{}],2:[function(e,t,n){var i=function(e,t){if(!t)return!1;for(var n=t.firstChild;null!==n;n=n.nextSibling)e.push(n),n.hasChildNodes()&&i(e,n)};n.loopChilds=i;n.updateElem=function(e,t){var n=[],o=[];n.push(e),o.push(t),i(n,e),i(o,t),n.map(function(e,t,i){var s,r;e&&1===e.nodeType&&e.hasAttributes()?function(e,t){if(e){for(var n=e.attributes,i={},o=n.length-1;o>=0;o--)i[n[o].name]=n[o].value;for(var s in i)t.attributes[s]&&t.attributes[s].name===s&&t.attributes[s].value!==i[s]&&t.setAttribute(s,i[s]);""===t.textContent&&e.textContent&&(t.textContent=e.textContent),"checkbox"===t.type&&!t.checked&&e.checked&&(t.checked=!0),"checkbox"===t.type&&t.checked&&!e.checked&&(t.checked=!1),i={}}}(o[t],e):e&&3===e.nodeType&&(s=o[t],r=e,s&&s.nodeValue!==r.nodeValue&&(r.nodeValue=s.nodeValue)),t===i.length-1&&(n.splice(0),o.splice(0))})}},{}],3:[function(e,t,n){var i=e("./copy"),o=e("./tag"),s=e("./tmplHandler"),r=e("./tmplStylesHandler"),a=e("./tmplClassHandler"),l=e("./tmplAttrHandler"),c=e("./processEvent"),p=e("./elementUtils").updateElem,u=e("./utils").selector,f=function(e,t){var n=this;if(e<this.__stateList__.length){var i=this.__stateList__[e],o=this[i];Object.defineProperty(this,i,{enumerable:!1,configurable:!0,get:function(){return o},set:function(e){o=e,function(){var e=this;Object.keys(this.base).map(function(t){var n,i=e.base[t]["keet-id"],o=u(i);o||"string"!=typeof e.base[t]||(o=document.getElementById(e.el));var s=[].slice.call(arguments);n=m.apply(e,[e.base[t]].concat(s)),p(o,n)})}.apply(n,t)}}),e++,f.apply(this,[e,t])}},d=function(e){f.apply(this,[0,e])},h=function(e){this.__stateList__=this.__stateList__.concat(e)},m=function(){var e=[].shift.call(arguments),t=[].slice.call(arguments),n=document.createElement("div"),p=i(e);delete p.template,delete p.tag,delete p.style,delete p.class,this.__stateList__=[];var u=e.template?s.call(this,e.template,h.bind(this)):"string"==typeof e?s.call(this,e,h.bind(this)):null,f=r.call(this,e.style,h.bind(this)),m=a.call(this,e,h.bind(this));m&&(p.class=m),t&&t.length&&l.apply(this,[p].concat(t));var y=e.tag?o(e.tag,u||"",p,f):u;return n.innerHTML=y,"input"===e.tag&&(p.checked?n.childNodes[0].checked=!0:n.childNodes[0].removeAttribute("checked")),d.call(this,t),c.call(this,n),"string"==typeof e?n:e.tag?n.childNodes[0]:n};n.genElement=m,n.setState=d,n.updateStateList=h},{"./copy":1,"./elementUtils":2,"./processEvent":6,"./tag":7,"./tmplAttrHandler":8,"./tmplClassHandler":9,"./tmplHandler":10,"./tmplStylesHandler":11,"./utils":12}],4:[function(e,t,n){var i=e("./processEvent"),o="";t.exports=function(e){var t,n=this.args,s=this.base.template.match(/{{([^{}]+)}}/g);return o=this.base.template,function e(t,n,i,s){if(t<i.length){var r=i[t].replace(/{{([^{}]+)}}/g,"$1");if(o=o.replace(/{{([^{}]+)}}/,n[r]),s&&~s.indexOf(r)&&!n[r]){var a=new RegExp(" "+r+'="'+n[r]+'"',"g");o=o.replace(a,"")}e(++t,n,i,s)}}(0,e,s,n),(t=document.createElement("div")).innerHTML=o,/ k-/.test(o)&&i.call(this,t),t.childNodes[0].setAttribute("keet-id",e["keet-id"]),t.childNodes[0]}},{"./processEvent":6}],5:[function(e,t,n){var i=e("./genElement").genElement,o=e("./genElement").setState,s=e("./tmplHandler"),r=e("./processEvent"),a=e("./utils").genId,l=e("./genTemplate");t.exports=function(){if("object"!=typeof this.base)throw new Error("instance is not an object");var e=this,t=[],n=[].slice.call(arguments);return Array.isArray(this.base.model)?(this.base.template=this.base.template.trim().replace(/\s+/g," "),this.base.model=this.base.model.map(function(e){return e["keet-id"]=a(),e}),this.base.model.map(function(n){t.push(l.call(e,n))})):Object.keys(this.base).map(function(l){var c=e.base[l];if(c&&"object"==typeof c){var p=a();c["keet-id"]=p,e.base[l]["keet-id"]=p;var u=i.apply(e,[c].concat(n));t.push(u)}else{e.__stateList__=[];var f=s.call(e,c,function(t){e.__stateList__=e.__stateList__.concat(t)}),d=document.createElement("div");d.innerHTML=f,o.call(e,n),r.call(e,d),d.childNodes.forEach(function(e){t.push(e)})}}),t}},{"./genElement":3,"./genTemplate":4,"./processEvent":6,"./tmplHandler":10,"./utils":12}],6:[function(e,t,n){var i=e("./elementUtils").loopChilds,o=function(e,t,n){var i,s,r,a,l,c=t.attributes;e<c.length?(/^k-/.test(c[e].nodeName)&&(i=c[e].nodeName.split("-")[1],"function"==typeof(r=this[(s=c[e].nodeValue.split("("))[0]])&&(n.push(c[e].nodeName),a=[],(l=s[1].slice(0,-1).split(",").filter(function(e){return""!==e})).length&&l.map(function(e){a.push(e)}),t.addEventListener(i,r.bind.apply(r.bind(this),[t].concat(a)),!1))),e++,o.apply(this,[e,t,n])):n.map(function(e){t.removeAttribute(e)})};t.exports=function(e){var t=this,n=[],s=[];i(n,e),n.map(function(e){1===e.nodeType&&e.hasAttributes()&&o.apply(t,[0,e,s])}),n=[]}},{"./elementUtils":2}],7:[function(e,t,n){t.exports=function(){return function(){var e,t,n=[].slice.call(arguments),i=["<",n[0],">",n[1],"</",n[0],">"];if(n.length>2&&"object"==typeof n[2])for(e in n[2])"boolean"==typeof n[2][e]&&n[2][e]?i.splice(2,0," ",e):"class"===e&&Array.isArray(n[2][e])?i.splice(2,0," ",e,'="',n[2][e].join(" ").trim(),'"'):i.splice(2,0," ",e,'="',n[2][e],'"');if(n.length>3&&"object"==typeof n[3]){for(e in t=[i.indexOf(">"),0,' style="'],n[3])t.push(e),t.push(":"),t.push(n[3][e]),t.push(";");t.push('"'),i.splice.apply(i,t)}return i}.apply(null,arguments).join("")}},{}],8:[function(e,t,n){var i=e("./genElement");t.exports=function(){var e=this,t=[].shift.call(arguments);Object.keys(t).map(function(n){var o=t[n].match(/{{([^{}]+)}}/g);if(o&&o.length){var s="";o.map(function(o){var r=o.replace(/{{([^{}]+)}}/g,"$1");void 0!==e[r]&&(i.updateStateList.call(e,r),!1===e[r]?delete t[n]:(s+=e[r],t[n]=s))})}})}},{"./genElement":3}],9:[function(e,t,n){t.exports=function(e,t){var n=this;if(e.class){var i=e.class.match(/{{([^{}]+)}}/g),o="";return i&&i.length&&i.map(function(e){var i=e.replace(/{{([^{}]+)}}/g,"$1");void 0!==n[i]&&(t(i),n[i].cstore.map(function(e){o+=e+" "}))}),o.length?o.trim():e.class}return!1}},{}],10:[function(e,t,n){t.exports=function(e,t){var n=this,i=e.match(/{{([^{}]+)}}/g);return i&&i.length&&i.map(function(i){var o=i.replace(/{{([^{}]+)}}/g,"$1");void 0!==n[o]&&(t(o),e=e.replace(/{{([^{}]+)}}/,n[o]))}),e}},{}],11:[function(e,t,n){var i=e("./copy");t.exports=function(e,t){var n=this,o=i(e);return e&&Object.keys(o).map(function(e){var i=o[e].match(/{{([^{}]+)}}/g);i&&i.length&&i.map(function(i){var s=i.replace(/{{([^{}]+)}}/g,"$1");void 0!==n[s]&&(t(s),o[e]=o[e].replace(/{{([^{}]+)}}/,n[s]))})}),o}},{"./copy":1}],12:[function(e,t,n){n.getId=function(e){return document.getElementById(e)},n.genId=function(){return Math.round(1*Math.random()*1e12).toString(32)},n.selector=function(e){return document.querySelector('[keet-id="'+e+'"]')}},{}],13:[function(e,t,n){"use strict";var i=e("./components/utils").getId,o=e("./components/utils").genId,s=e("./components/utils").selector,r=e("./components/parseStr"),a=e("./components/genTemplate"),l=e("./components/elementUtils").updateElem,c=function(e,t,n){var i,o=this;if(e<n.length)t.childNodes[e]||t.appendChild(n[e]),e++,c.apply(this,[e,t,n]);else{this.baseProxy=(i=this.base,new Proxy(i,{set:function(e,t,n){return e[t]=n,o.base[t]=e[t],!0},deleteProperty:function(e,t){var n=e[t]["keet-id"],i=s(n);return i&&i.remove(),delete o.base[t],!0}})),this.componentDidMount&&"function"==typeof this.componentDidMount&&this.componentDidMount()}};function p(){this.base={},Object.defineProperty(this,"__stateList__",{enumerable:!1,writable:!0})}p.prototype.mount=function(e){return"object"==typeof e&&Object.keys(e).map(function(t){"string"==typeof e[t]?e[t]=e[t].trim().replace(/\s+/g," "):"object"==typeof e[t]&&"string"==typeof e[t].template&&(e[t].template=e[t].template.trim().replace(/\s+/g," "))}),this.base=e,this},p.prototype.flush=function(e){var t=i(this.el);return t&&(t.innerHTML=""),this},p.prototype.link=function(e){return this.el=e,this.componentWillMount&&"function"==typeof this.componentWillMount&&this.componentWillMount(),this.render(),this},p.prototype.render=function(){var e=i(this.el),t=r.apply(this,this.args);return e&&c.apply(this,[0,e,t]),this},p.prototype.cluster=function(){var e=[].slice.call(arguments);e.length>0&&e.map(function(e){"function"==typeof e&&e()})},p.prototype.add=function(e){var t=i(this.el);Array.isArray(this.base.model)&&(e["keet-id"]=o(),this.base.model=this.base.model.concat(e),t.appendChild(a.call(this,e)))},p.prototype.destroy=function(e,t){Array.isArray(this.base.model)&&(this.base.model=this.base.model.filter(function(n,i){if(e!==n[t])return n;var o=s(n["keet-id"]);o&&o.remove()}))},p.prototype.update=function(e,t,n){var i=this;Array.isArray(this.base.model)&&(this.base.model=this.base.model.map(function(o,r,c){if(e===o[t]){n&&"object"==typeof n&&Object.assign(o,n);var p=s(o["keet-id"]);p&&l(p,a.call(i,o))}return o}))},t.exports=p},{"./components/elementUtils":2,"./components/genTemplate":4,"./components/parseStr":5,"./components/utils":12}]},{},[13])(13)});
/**
 * Keetjs v3.4.4 Alpha release: https://github.com/keetjs/keet.js
 * Minimalist view layer for the web
 *
 * <<<<<<<<<<<<<<<<<<<<<<<<<<<<<< Keetjs >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
 *
 * Copyright 2018, Shahrul Nizam Selamat
 * Released under the MIT License.
 */
