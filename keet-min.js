/**
 * Keetjs v4.0.0 Alpha release: https://github.com/keetjs/keet.js
 * Minimali4.0.0ew layer for the web
 *
 * <<<<<<<<<<<<<<<<<<<<<<<<<<<<<< Keetjs >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
 *
 * Copyright 2018, Shahrul Nizam Selamat
 * Released under the MIT License.
 */

var keet=function(){"use strict";function e(e){if(e.match(/([^?]*)\?([^:]*):([^;]*)|(\s*=\s*)[^;]*/g)){var t=e.split("?"),n=t[0],i=t[1].split(":")[0],o=t[1].split(":")[1];return!!this&&(this[n]?{value:E(i),state:n}:{value:E(o),state:n})}return!1}function t(e,t){"function"==typeof t&&t(e)}function n(e,t,n,i){t=t.replace(n,i),e&&(e.nodeValue=t)}function i(i,o,r,l,a,d){for(var c=i.match(M),s=c.length,u=void 0,f=void 0,h=void 0;s;)if(s--,u=c[s].replace(M,"$1"),f=e.call(r,u),h=I(u))t(u,l),n(o,i,"{{"+u+"}}",r[h[0]][h[1]]);else if(f){if(t(f.state,l),d)return f.value;n(o,i,"{{"+u+"}}",f.value)}else if(void 0!==r[u]){if(t(u,l),d)return r[u];n(o,i,"{{"+u+"}}",r[u])}}function o(e,t,n){var i=void 0,o=void 0,r=void 0,l=void 0,a=void 0,d=void 0,c=void 0,s=void 0,u=void 0,f=void 0,h=void 0,p=void 0,m=void 0,v=void 0,g=void 0,b=void 0;if(j[t]=j[t]||{},j[t].list||(j[t].list=e.nextSibling.cloneNode(!0)),m=j[t].list,j[t].str||(j[t].str=e.nextSibling.cloneNode(!0).outerHTML),v=j[t].str,j[t].ref||m.hasAttribute("id")&&m.id.match(B)&&(j[t].ref=m.id.replace(B,"$1"),e.nextSibling.remove(),b=this.__pristineFragment__.getElementById(m.id),b&&b.remove()),f=j[t].ref,void 0!==this[t]&&this[t].hasOwnProperty("list"))if(l=e.parentNode,H&&!l.hasAttribute("data-ignore")&&l.setAttribute("data-ignore",""),i=this[t].list,g=j[t].oldModel||[],H){c=L(i,g),s=L(g,i);var y=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];u=n.pop(),h=g.length===i.length,h?c.map(function(e){p=u.querySelector('[id="'+e[f]+'"]'),a=V(v,e),d=H.createContextualFragment(a),u.replaceChild(d,p)}):c.length>0&&0===s.length?c.map(function(e){a=V(v,e),d=H.createContextualFragment(a),u.insertBefore(d,u.lastChild)}):0===c.length&&s.length>0&&s.map(function(e){p=u.querySelector('[id="'+e[f]+'"]'),u.removeChild(p)}),j[t].oldModel=JSON.parse(JSON.stringify(i))};l.hasAttribute("id")&&(u=O(l.id),u?y.call(this,null,null,u):w({el:l.id},t,y.bind(this),function(){j[t].oldModel=[]}))}else for(o=0;o<void 0;)r=m.cloneNode(!0),n(this,null,r,i[o]),o++;else F(!1,'Model "'+t+'" does not exist.')}function r(e,t,n){for(var i=document.createDocumentFragment(),o=void 0,r=void 0,l=void 0,a=void 0;e;)r=e,e=e.nextSibling,r.nodeType!==$?r.nodeValue.match(R)?o=r:r.nodeValue.match(K)&&(r.remove(),l||(l=!0,n(this,null,null,null,i)),this[t]&&o.parentNode.insertBefore(i,o),o.remove(),e=null):(a=r.cloneNode(!0),i.appendChild(a),r.remove())}function l(e,t){var n=e.replace("component:",""),i=this[n];void 0!==i?(q[i.ID]?O(this[n].el)?t.parentNode.replaceChild(q[i.ID].cloneNode(!0),t):(i.base=i.__pristineFragment__.cloneNode(!0),i.render.call(i,!0),t.parentNode.replaceChild(i.base,t)):(i.render.call(i,!0),q[i.ID]=i.base.cloneNode(!0),t.parentNode.replaceChild(i.base,t)),i.callBatchPoolUpdate()):F(!1,"Component "+n+" does not exist.")}function a(e,n,i,a,d){var c=void 0,s=void 0,u=void 0;e.match(W)&&(s=e.replace(W,"$1").trim(),s.match(Y)?(u=s.replace("model:",""),o.call(this,n,u,d)):s.match(G)?(c=s.replace("?",""),void 0!==i[c]&&(t(c,a),r.call(this,n,c,d))):s.match(J)&&l.call(this,s,n))}function d(e){var t=this,n=void 0,i=0,o=void 0,r=void 0,l=void 0,a=void 0,d=void 0,c=void 0,s=void 0,u=void 0,f=void 0,h=void 0,p=void 0;if(n=e.attributes,Q(e));else for(i=n.length;i--;)o=n[i],h=o.localName,r=o.nodeValue,/^k-/.test(h)&&(l=h.replace(/^k-/,""),u=r.match(/[a-zA-Z]+(?![^(]*\))/)[0],a=this[u],void 0!==a&&"function"==typeof a&&(d=r.match(/\(([^{}]+)\)/),c=d?d[1]:"",s=c.split(",").filter(function(e){return""!==e}),f=function(e){e.stopPropagation(),e.target!==e.currentTarget&&a.apply(t,[e.target,e])},e.hasChildNodes()&&e.firstChild.nodeType!==z&&e.firstChild.nodeValue.match(Z)?(e.setAttribute("is-model-event-set",""),e.addEventListener(l,f,!1)):e.addEventListener(l,a.bind.apply(a.bind(this),[e].concat(s)),!1),e.hasAttribute("evt-node")||(e.setAttribute("evt-node",""),e.hasAttribute("id")&&(p=this.__pristineFragment__.getElementById(e.id),p.setAttribute("evt-node","")))))}function c(e,t,n,o,r){var l=void 0,s=void 0,u=void 0,f=void 0,h=0,p=void 0,m=void 0,v=void 0;o?u=n:r?u=r.firstChild:(s=e.base,u=s.firstChild);var g=o||e,b=function(e){for(f=e.attributes,h=f.length;h--;)p=f[h],v=p.localName,m=p.nodeValue,te.test(v)?(e.removeAttribute(v),v=i(v,e,g,null,null,!0),e.setAttribute(v,m)):te.test(m)&&(m=i(m,e,g,null,null,!0),""===m?e.removeAttribute(v):"checked"===v?e.setAttribute(v,""):e.setAttribute(v,m))};!function n(o){for(;o;)l=o,l.nodeType===X?(l.hasAttributes()&&(d.call(e,l),b(l)),n(l.firstChild)):l.nodeValue.match(te)&&(l.nodeType===ee?a.call(e,l.nodeValue,l,g,t,c):i.call(e,l.nodeValue,l,g,t,c)),o=o.nextSibling}(u)}function s(e,t){var n=ne.parseFromString(e,le);return n.body?t===ie?n.documentElement:n.body.firstChild:u(e,t)}function u(e,t){if(t===ie){if(re)return he.innerHTML=e,he;var n=e.match(me);if(n){var i=n[2],o=n.index+n[1].length,r=o+i.length;e=e.slice(0,o)+e.slice(r),pe.innerHTML=i}for(var l=ne.parseFromString(e,ae),a=l.body;pe.firstChild;)a.appendChild(pe.firstChild);return l.documentElement}return pe.innerHTML=e,pe.firstChild}function f(e,t){T(e&&e.nodeType,"You must provide a valid node to update."),e.nodeType===Ce&&(e=e.documentElement),t.nodeType===Ne?m(e,t):h(e,"string"==typeof t?ve(t,e.nodeName):t),e[be]||(e[be]=!0,C(e))}function h(e,t){if(e.nodeType===t.nodeType)if(e.nodeType===ye){if(g(e,t))return;if(m(e,t),e.nodeName===t.nodeName)p(e.attributes,t.attributes);else{for(var n=t.cloneNode();e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e)}}else e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue);else e.parentNode.replaceChild(t,N(e)),C(t)}function p(e,t){var n,i,o,r,l;for(n=e.length;n--;)i=e[n],r=i.namespaceURI,l=i.localName,o=t.getNamedItemNS(r,l),o||e.removeNamedItemNS(r,l);for(n=t.length;n--;)i=t[n],r=i.namespaceURI,l=i.localName,o=e.getNamedItemNS(r,l),o?o.value!==i.value&&(o.value=i.value):(t.removeNamedItemNS(r,l),e.setNamedItemNS(i))}function m(e,t){for(var n,i,o,r,l,a,d=e.firstChild,c=t.firstChild,s=0;d;)s++,n=d,i=v(n),d=d.nextSibling,i&&(a||(a={}),a[i]=n);for(d=e.firstChild;c;)s--,o=c,c=c.nextSibling,a&&(r=v(o))&&(l=a[r])?(delete a[r],l!==d?e.insertBefore(l,d):d=d.nextSibling,h(l,o)):d?(n=d,d=d.nextSibling,v(n)?(e.insertBefore(o,n),C(o)):h(n,o)):(e.appendChild(o),C(o));for(i in a)s--,e.removeChild(N(a[i]));for(;--s>=0;)e.removeChild(N(e.lastChild))}function v(e){if(e.nodeType===ye){var t=e.getAttribute(f.KEY)||e.id;return t?ge+t:void 0}}function g(e,t){return y(e)&&y(t)||b(e)===b(t)||e.isEqualNode(t)}function b(e){return e.getAttribute(f.CHECKSUM)||NaN}function y(e){return null!=e.getAttribute(f.IGNORE)}function C(e){return S(e,"mount")}function N(e){return S(e,"dismount")}function S(e,t){if(v(e)){var n=document.createEvent("Event"),i={value:e};n.initEvent(t,!1,!1),Object.defineProperty(n,"target",i),Object.defineProperty(n,"srcElement",i),e.dispatchEvent(n)}for(var o=e.firstChild;o;)o=S(o,t).nextSibling;return e}function T(e,t){if(!e)throw Error("set-dom: "+t)}function A(e){c(this,Oe);var t=e||O(this.el);t?(t.nodeType===Fe?t.setAttribute("data-ignore",""):(F(1===this.base.childNodes.length,"Sub-component should only has a single rootNode."),!this.base.firstChild.hasAttribute("data-ignore")&&this.base.firstChild.setAttribute("data-ignore","")),_e.call(this),e||t.appendChild(this.base),this.componentDidMount&&"function"==typeof this.componentDidMount&&this.componentDidMount()):F(!1,'No element with id: "'+this.el+'" exist.')}function x(e){var t=void 0,n=void 0,i=document.createDocumentFragment();if("string"==typeof e)for(t=e.trim().replace(/\s+/g," "),n=document.createElement("div"),n.innerHTML=t;n.firstChild;)i.appendChild(n.firstChild);else"object"===(void 0===e?"undefined":_(e))&&e.nodeType?e.nodeType===Ve?i.appendChild(e):e.nodeType===Pe?i=e:e.nodeType===Ue?i.appendChild(e):assert(!1,"Unable to parse instance, unknown type."):assert(!1,"Parameter is not a string or a html element.");return this.__pristineFragment__=i.cloneNode(!0),this.base=i,ke(),this}var E=function(e){return"''"===e||'""'===e||"null"===e?"":e},I=function(e){var t=e.match(/\.*\./g);return t&&t.length>0?e.split("."):void 0},M=/{{([^{}]+)}}/g,_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(){var e=function(){return(1*Math.random()*1e17).toString(36).toUpperCase()};return"KDATA-"+e()+"-"+e()},O=function(e){return document.getElementById(e)},w=function(e,t,n,i){function o(){l=O(e.el),l&&(clearInterval(d),a=!0,n(e,t,l))}function r(){clearInterval(d),!a&&i&&"function"==typeof i&&i()}var l=O(e.el),a=!1,d=void 0;return l?l:(d=setInterval(o,0),void setTimeout(r,100))},F=function(e,t){if(!e)throw Error("(keet) "+t)},P=(function(){function e(){this.model=[],Object.defineProperty(this,"list",{enumerable:!1,configurable:!0,get:function(){return this.model},set:function(e){this.model=e,this.inform(this.model)}})}return e.prototype.inform=function(e){this.exec&&"function"==typeof this.exec&&this.exec(e)},e.prototype.subscribe=function(e){this.exec=e},e.prototype.add=function(e){this.list=this.list.concat(e)},e.prototype.update=function(e,t){this.list=this.list.map(function(n){return n[e]!==t[e]?n:Object.assign(n,t)})},e.prototype.destroy=function(e,t){this.list=this.list.filter(function(n){return n[e]!==t})},e}(),RegExp(/(\schecked=")(.*?)(?=")/g)),U="",V=function(t,n){var i=t.match(/{{([^{}]+)}}/g),o=void 0,r=void 0,l=void 0,a=void 0,d=void 0;for(U=t,l=0,a=i.length;l<a;l++)o=i[l].replace(/{{([^{}]+)}}/g,"$1"),r=e.call(n,o),U=r?U.replace("{{"+o+"}}",r.value):U.replace("{{"+o+"}}",n[o]),d=U.match(P),d&&(U=17===d[0].length?U.replace(' checked="checked"'," checked"):U.replace(' checked=""',""));return U},B=/{{([^{}]+)}}/g,L=function(e,t){return e.filter(function(e){return!t.some(function(t){var n=!0;for(var i in t)e[i]!==t[i]&&(n=!1);return n})})},H=void 0;"function"==typeof document.createRange&&(H=document.createRange());var j={},R=/\{\{\?([^{}]+)\}\}/g,K=/\{\{\/([^{}]+)\}\}/g,$=1,q={},W=/{{([^{}]+)}}/g,Y=/^model:/g,G=/^\?/g,J=/^component:([^{}]+)/g,z=1,Z=/\{\{model:([^{}]+)\}\}/g,Q=function(e){return!!(e.hasAttribute("id")&&O(e.id)&&e.hasAttribute("evt-node"))},X=1,ee=8,te=/{{([^{}]+)}}/g,ne=window.DOMParser&&new window.DOMParser,ie="HTML",oe=!1,re=!1,le="text/html",ae="application/xhtml+xml",de="A",ce='<wbr class="'+de+'"/>';try{var se=ne.parseFromString(ce,le).body.firstChild,ue=document.createElement("div");if(ue.appendChild(se),ue.firstChild.classList[0]!==de)throw Error();oe=!0}catch(e){}var fe=document.implementation.createHTMLDocument(""),he=fe.documentElement,pe=fe.body;try{he.innerHTML+="",re=!0}catch(e){ne.parseFromString(ce,ae);var me=/(<body[^>]*>)([\s\S]*)<\/body>/}var ve=oe?s:u;f.KEY="data-key",f.IGNORE="data-ignore",f.CHECKSUM="data-checksum";var ge="_set-dom-",be=ge+"mounted",ye=1,Ce=9,Ne=11,Se=f,Te=1,Ae=void 0,xe=function(){Ae=O(this.el),we.call(this),Ae&&(this.IS_STUB?Se(Ae,this.base.firstChild):Se(Ae,this.base)),this.componentDidUpdate&&"function"==typeof this.componentDidUpdate&&this.componentDidUpdate()},Ee={},Ie=function(e,t){var n=this;Ee[this.ID]=Ee[this.ID]||null,clearTimeout(Ee[this.ID]),Ee[this.ID]=setTimeout(function(){return e.call(n)},t)},Me=function e(t){var n=void 0,i=void 0;if(t<De.length){if(n=De[t],i=this[n],void 0===i&&(i=I(n)),i&&Array.isArray(i)){var o=this[i[0]][i[1]];Object.defineProperty(this[i[0]],i[1],{enumerable:!1,configurable:!0,get:function(){return o},set:function(e){o=e,Ie.call(this,xe,Te)}})}else Object.defineProperty(this,n,{enumerable:!1,configurable:!0,get:function(){return i},set:function(e){i=e,Ie.call(this,xe,Te)}});t++,e.call(this,t)}},_e=function(){Me.call(this,0)},De=[],ke=function(){De=[]},Oe=function(e){De.indexOf(e)===-1&&(De=De.concat(e))},we=function(){this.base=this.__pristineFragment__.cloneNode(!0),c(this,Oe)},Fe=1,Pe=11,Ue=3,Ve=1;return function(){function e(){this.ID=e.indentity}return e.prototype.mount=function(e){return x.call(this,e)},e.prototype.link=function(e){return e||F(e,"No id is given as parameter."),this.el=e,this.render(),this},e.prototype.render=function(e){this.componentWillMount&&"function"==typeof this.componentWillMount&&this.componentWillMount(),e&&(this.IS_STUB=!0),A.call(this,e)},e.prototype.callBatchPoolUpdate=function(){Ie.call(this,xe,1)},e.prototype.subscribe=function(e){this.exec=e},e.prototype.inform=function(e){this.exec&&"function"==typeof this.exec&&this.exec(e)},D(e,null,[{key:"indentity",get:function(){return k()}}]),e}()}();
//# sourceMappingURL=keet-min.js.map